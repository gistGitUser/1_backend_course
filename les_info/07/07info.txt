

При транзакциях может возникнуть проблема при обновлении данных,
т.к. две транзакции могут попытаться одновременно
модифицировать данные, что приведёт к некорректному результату.

Поэтому чтобы заблокировать транзакцию, нужно использовать инструкцию
FOR UPDATE

Например если вы откроете два терминала с подключение к бд и
запустите транзакции:
`
begin;
select * from ... where id = 1;
`

то вам вернёт одинаковые значения - это не то, что нам нужно, т.к.
транзакции обновляют данные и одна из транзакций будет уже работать
с устаревшими данными.
поэтому в конце запроса нужно добавить for update эта транзакция
будет ждать пока другая не закончится комитом или ролбэком
`
begin;
select * from ... where id = 1 FOR UPDATE;
`
Соотвественно добавляем новый метод в sql файл
-- name: GetAccountForUpdate :one
select * from accounts
where id = $1 limit 1
FOR UPDATE;